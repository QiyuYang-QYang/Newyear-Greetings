<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Year Quest 2026</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #f4f7f9; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 15px; }
        .container { background: white; width: 100%; max-width: 500px; padding: 25px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h2 { color: #333; text-align: center; margin-top: 0; }
        .question { margin-bottom: 20px; line-height: 1.6; color: #444; font-size: 17px; }
        .options { display: flex; flex-direction: column; gap: 12px; }
        button { background: #007AFF; color: white; border: none; padding: 14px; border-radius: 10px; cursor: pointer; font-size: 16px; transition: all 0.2s; font-weight: 500; }
        button:hover { background: #0056b3; }
        textarea { width: 100%; height: 120px; padding: 12px; border: 1px solid #ddd; border-radius: 10px; box-sizing: border-box; font-size: 16px; margin-bottom: 15px; resize: none; }
        pre { font-family: "Courier New", Courier, monospace; background: #222; color: #00ff00; padding: 15px; overflow-x: auto; border-radius: 10px; line-height: 1.0; font-size: 8px; white-space: pre; }
        .loading { text-align: center; font-style: italic; color: #888; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container" id="app"></div>

    <script>
        const formspreeURL = "https://formspree.io/f/xjgkvgkl";

        // 完整的题目数据
        const questions = [
            { q: "《Aloha ʻOe》是谁创作的？", o: ["卡拉卡瓦国王", "利留卡拉尼女王", "卡美哈梅哈大帝"], a: 1 },
            { q: "在《爆裂鼓手》(Whiplash) 中，练到手废的那首曲子《Whiplash》最初是由谁创作的？", o: ["Duke Ellington", "Hank Levy", "Miles Davis"], a: 1 },
            { q: "最后一天《怪奇物语》(Stranger Things) 将迎来大结局", o: ["Ye", "Nah", "Strange Things SUX"], a: 0 },
            { q: "匹兹堡的三姐妹桥是以谁命名的？", o: ["Billy Eckstine, Mary Lou Williams, George Benson", "Andrew Carnegie, Henry J. Hein, Williams Mellon", "Roberto Clemente, Andy Worhol, Rachel Carson"], a: 2 },
            { q: "你最近最期待的一件事情是什么，and 用一种颜色形容你的这一年！！", isOpen: true }
        ];

        // 包含来自源文件的完整坐标数据 
        const pixelData = [
            {x:0,c:"█",y:0},{x:0,c:"█",y:1},{x:0,c:"█",y:2},{x:0,c:"█",y:3},{x:0,c:"█",y:4},{x:1,c:"▀",y:2},{x:2,c:"█",y:0},{x:2,c:"█",y:1},{x:2,c:"█",y:2},{x:2,c:"█",y:3},{x:2,c:"█",y:4},
            {x:4,c:"█",y:0},{x:4,c:"█",y:1},{x:4,c:"█",y:2},{x:4,c:"█",y:3},{x:5,c:"▀",y:2},{x:5,c:"▀",y:4},{x:6,c:"█",y:0},{x:6,c:"█",y:1},{x:6,c:"█",y:2},{x:6,c:"█",y:3},
            {x:8,c:"█",y:0},{x:8,c:"█",y:1},{x:8,c:"█",y:2},{x:8,c:"█",y:3},{x:8,c:"█",y:4},{x:9,c:"▀",y:2},{x:9,c:"▀",y:4},{x:10,c:"█",y:3},{x:10,c:"█",y:4},
            {x:12,c:"█",y:0},{x:12,c:"█",y:1},{x:12,c:"█",y:2},{x:12,c:"█",y:3},{x:12,c:"█",y:4},{x:13,c:"▀",y:2},{x:13,c:"▀",y:4},{x:14,c:"█",y:3},{x:14,c:"█",y:4},
            {x:16,c:"█",y:4},{x:16,c:"█",y:3},{x:17,c:"█",y:2},{x:17,c:"█",y:1},{x:17,c:"█",y:0},{x:18,c:"█",y:4},{x:18,c:"█",y:3},
            {x:21,c:"█",y:0},{x:21,c:"█",y:1},{x:21,c:"█",y:2},{x:21,c:"█",y:3},{x:21,c:"█",y:4},{x:22,c:"▀",y:3},{x:23,c:"█",y:0},{x:23,c:"█",y:1},{x:23,c:"█",y:2},{x:23,c:"█",y:3},{x:23,c:"█",y:4},
            {x:25,c:"█",y:0},{x:25,c:"█",y:1},{x:25,c:"█",y:2},{x:25,c:"█",y:3},{x:25,c:"█",y:4},{x:26,c:"▀",y:0},{x:26,c:"▀",y:2},{x:26,c:"▀",y:4},{x:27,c:"▀",y:0},{x:27,c:"▀",y:2},{x:27,c:"▀",y:4},
            {x:29,c:"█",y:1},{x:29,c:"█",y:2},{x:29,c:"█",y:3},{x:29,c:"█",y:4},{x:30,c:"█",y:0},{x:31,c:"█",y:1},{x:31,c:"█",y:2},{x:31,c:"█",y:3},{x:31,c:"█",y:4},
            {x:34,c:"█",y:4},{x:34,c:"█",y:3},{x:35,c:"█",y:2},{x:35,c:"█",y:1},{x:35,c:"█",y:0},{x:36,c:"█",y:4},{x:36,c:"█",y:3},
            {x:38,c:"█",y:0},{x:38,c:"█",y:1},{x:38,c:"█",y:2},{x:38,c:"█",y:3},{x:38,c:"█",y:4},{x:39,c:"▀",y:0},{x:39,c:"▀",y:2},{x:39,c:"▀",y:4},{x:40,c:"▀",y:0},{x:40,c:"▀",y:2},{x:40,c:"▀",y:4},
            {x:42,c:"█",y:0},{x:42,c:"█",y:1},{x:42,c:"█",y:2},{x:42,c:"█",y:3},{x:43,c:"▀",y:2},{x:43,c:"▀",y:4},{x:44,c:"█",y:0},{x:44,c:"█",y:1},{x:44,c:"█",y:2},{x:44,c:"█",y:3},
            {x:46,c:"█",y:0},{x:46,c:"█",y:1},{x:46,c:"█",y:2},{x:46,c:"█",y:3},{x:46,c:"█",y:4},{x:47,c:"▀",y:2},{x:47,c:"▀",y:4},{x:48,c:"█",y:3},{x:48,c:"█",y:4},{x:48,c:"█",y:0},
            {x:51,c:"█",y:4},{x:51,c:"█",y:3},{x:51,c:"█",y:2},{x:51,c:"█",y:0},
            {x:54,c:"█",y:1},{x:54,c:"█",y:2},{x:54,c:"█",y:3},{x:56,c:"▀",y:2},{x:58,c:"█",y:2},{x:59,c:"▀",y:3},{x:60,c:"█",y:2},{x:62,c:"▀",y:2},{x:64,c:"█",y:1},{x:64,c:"█",y:2},{x:64,c:"█",y:3}
        ];

        let step = 0;
        const app = document.getElementById('app');

        function render() {
            if (step < questions.length) {
                const item = questions[step];
                let html = `<h2>Step ${step + 1}</h2><p class="question">${item.q}</p>`;
                if (!item.isOpen) {
                    html += `<div class="options">`;
                    item.o.forEach((opt, i) => {
                        html += `<button onclick="handleSelect(${i})">${opt}</button>`;
                    });
                    html += `</div>`;
                } else {
                    html += `<textarea id="finalAns" placeholder="在此输入你的回答..."></textarea>`;
                    html += `<button style="width:100%" onclick="handleSubmit()">提交</button>`;
                }
                app.innerHTML = html;
            } else {
                showResult();
            }
        }

        window.handleSelect = (i) => {
            step++;
            render();
        };

        window.handleSubmit = () => {
            const val = document.getElementById('finalAns').value;
            if (!val) return alert("请写下你的回答再提交！");
            
            fetch(formspreeURL, {
                method: 'POST',
                body: JSON.stringify({ message: val }),
                headers: { 'Content-Type': 'application/json' }
            });
            step++;
            render();
        };

        function showResult() {
            const maxX = Math.max(...pixelData.map(p => p.x));
            const maxY = Math.max(...pixelData.map(p => p.y));
            let grid = Array.from({ length: maxY + 1 }, () => Array(maxX + 1).fill(' '));

            pixelData.forEach(p => {
                grid[maxY - p.y][p.x] = p.c;
            });

            const resultStr = grid.map(row => row.join('')).join('\n');
            app.innerHTML = `<h2>Challenge Complete!</h2><pre>${resultStr}</pre><p style='text-align:center; color:#888;'>Regardless of how you perfromed in 2025, just embrace your new year! 本命年快乐！龙马精神，马到成功o(^_^)o</p>`;
        }

        render();
    </script>
</body>
</html>
